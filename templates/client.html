<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Fresh Seafood</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow-x: hidden; }

        .hero {
            position: relative; height: 100vh;
            background: linear-gradient(rgba(7,89,133,0.7), rgba(3,105,161,0.7)),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><rect fill="%230e7490" width="1200" height="800"/><circle cx="400" cy="300" r="150" fill="%230891b2" opacity="0.3"/><circle cx="800" cy="500" r="120" fill="%2306b6d4" opacity="0.3"/><path d="M0,400 Q300,350 600,400 T1200,400 L1200,800 L0,800 Z" fill="%23164e63" opacity="0.4"/></svg>');
            background-size: cover; background-position: center; background-attachment: fixed;
            display: flex; flex-direction: column;
        }

        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 14px 56px; position: fixed; top: 0; width: 100%; z-index: 1000;
            background: rgba(7,89,133,0.3); backdrop-filter: blur(10px); transition: all 0.3s ease; backdrop-filter: blur(14px);
        }
        nav.scrolled { background: rgba(7,89,133,0.95); padding: 15px 60px; }

        .logo { display: flex; align-items: center; gap: 15px; cursor: pointer; }
        .logo-circle {
            width: 60px; height: 60px; background: linear-gradient(135deg, #0ea5e9, #06b6d4);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.8em; color: white; box-shadow: 0 4px 15px rgba(6,182,212,0.4);
        }
        .logo-text { font-size: 1.8em; font-weight: 700; color: white; }

        .nav-links { display: flex; gap: 40px; list-style: none; }
        .nav-links a {
            color: white; text-decoration: none; font-weight: 500; font-size: 1.05em;
            position: relative; transition: all 0.3s ease; cursor: pointer;
        }
        .nav-links a::after {
            content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px;
            background: #06b6d4; transition: width 0.3s ease;
        }
        .nav-links a:hover { color: #06b6d4; }
        .nav-links a:hover::after, .nav-links a.active::after { width: 100%; }
        .nav-links a.active { color: #06b6d4; }

        .nav-icons { display: flex; gap: 25px; align-items: center; }
        .nav-icon {
            color: white; font-size: 1.3em; cursor: pointer;
            transition: all 0.3s ease; position: relative;
        }
        .nav-icon:hover { color: #06b6d4; transform: scale(1.1); }
        .cart-badge {
            position: absolute; top: -8px; right: -8px; background: #0ea5e9; color: white;
            width: 20px; height: 20px; border-radius: 50%; display: flex;
            align-items: center; justify-content: center; font-size: 0.7em; font-weight: bold;
        }

        .social-links {
            position: fixed; left: 40px; top: 50%; transform: translateY(-50%);
            display: flex; flex-direction: column; gap: 20px; z-index: 100;
        }
        .social-icon {
            width: 45px; height: 45px; background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: white; cursor: pointer; transition: all 0.3s ease;
        }
        .social-icon:hover {
            background: #0ea5e9; transform: scale(1.1); box-shadow: 0 5px 15px rgba(14,165,233,0.4);
        }

        .hero-content {
            flex: 1; display: flex; flex-direction: column; justify-content: center;
            align-items: center; text-align: center; padding: 0 20px; animation: fadeInUp 1s ease;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-title {
            font-size: 7em; font-weight: 800; color: white;
            line-height: 1.1; margin-bottom: 20px; text-transform: capitalize;
        }
        .hero-subtitle {
            font-size: 7em; font-weight: 800;
            background: linear-gradient(135deg, #06b6d4, #0ea5e9);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; margin-bottom: 30px; text-transform: capitalize;
        }
        .hero-description {
            font-size: 1.2em; color: rgba(255,255,255,0.95); max-width: 800px;
            line-height: 1.8; margin-bottom: 40px;
        }
        .cta-button {
            padding: 18px 45px; background: linear-gradient(135deg, #0ea5e9, #06b6d4);
            color: white; border: none; border-radius: 50px; font-size: 1.2em;
            font-weight: 600; cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(14,165,233,0.3);
        }
        .cta-button:hover { transform: translateY(-3px); box-shadow: 0 15px 40px rgba(14,165,233,0.5); }

        .nav-arrow {
            position: absolute; top: 50%; transform: translateY(-50%);
            width: 60px; height: 60px; background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px); border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: white; font-size: 1.5em; cursor: pointer; transition: all 0.3s ease;
        }
        .nav-arrow:hover {
            background: rgba(14,165,233,0.8); border-color: #0ea5e9; transform: translateY(-50%) scale(1.1);
        }
        .nav-arrow.left { left: 60px; }
        .nav-arrow.right { right: 60px; }

        .scroll-indicator {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            animation: bounce 2s infinite; cursor: pointer;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-10px); }
            60% { transform: translateX(-50%) translateY(-5px); }
        }
        .scroll-indicator::before { content: '‚Üì'; font-size: 2em; color: white; }

        .main-content { min-height: 100vh;     background: linear-gradient( 180deg, #e0f2fe, #cfeff5, #b6e3ec  ); }
        .container { display: flex; min-height: calc(100vh - 90px); }
        .content { flex: 3; padding: 25px; }
        .cart { flex: 1; background: #f8f9fa; padding: 25px; border-left: 1px solid #ddd; }
        .hidden { display: none; }

        button, a.btn {
            padding: 8px 14px; border: none; border-radius: 6px; cursor: pointer;
            background: #0ea5e9; color: white; font-weight: 600;
            text-decoration: none; transition: all 0.3s ease;
        }
        button:hover, a.btn:hover { background: #0284c7; transform: translateY(-2px); }

        /* .products-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 20px; margin-top: 20px;
        } */
        /* .product-card {
            background: white; border: 2px solid #e0e0e0; border-radius: 12px;
            padding: 20px; transition: 0.3s; 
        }*/
        .product-card:hover {
            transform: translateY(-5px); box-shadow: 0 10px 25px rgba(14,165,233,0.2);
            border-color: #0ea5e9;
        }
        .product-name { font-size: 1.2em; font-weight: 700; color: #075985; margin-bottom: 8px; }
        .product-category {
            display: inline-block; background: #0ea5e9; color: white; width: fit-content;
            padding: 4px 10px; border-radius: 14px; font-size: 0.8em; margin-bottom: 12px;
        }
        .price-row { display: flex; justify-content: space-between; margin: 6px 0; }
        .customer-price { color: #0891b2; font-weight: 700; font-size: 1.1em; }
        .add-btn { width: 100%; margin-top: 12px; background: #0891b2; padding: 10px; }

        .cart h3 { color: #075985; margin-bottom: 15px; }
        .cart-item {
            background: white; padding: 12px; border-radius: 8px; margin-bottom: 10px;
            display: flex; justify-content: space-between; align-items: center;
            animation: fadeSlide 0.25s ease-in-out;
        }
        @keyframes fadeSlide {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .cart-item-name { font-weight: 600; color: #075985; }
        .cart-item-meta { font-size: 0.85em; color: #6b7280; }
        .cart-item-price { font-weight: 700; color: #0891b2; }
        .cart-total {
            background: white; padding: 12px; border-radius: 8px; font-size: 1.1em;
            font-weight: 700; text-align: right; margin-top: 15px; color: #075985;
        }

        .qty-btn {
            background: #e5e7eb; color: #111827; border: none; padding: 3px 8px;
            margin: 0 4px; border-radius: 4px; cursor: pointer; font-weight: bold;
        }
        .qty-btn:hover { background: #d1d5db; }
        .qty-input {
            width: 45px; padding: 3px; text-align: center; border: 1px solid #d1d5db;
            border-radius: 4px; font-weight: 600; margin: 0 4px;
        }
        /* .remove-btn { background: #dc2626; padding: 4px 10px; font-size: 0.8em; margin-top: 6px; }
        .remove-btn:hover { background: #b91c1c; } */

        .orders-header {
            background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 25px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .orders-header h2 { color: #075985; margin: 0; }

        .order-card {
            background: white; border: 2px solid #e5e7eb; border-radius: 14px;
            padding: 22px; margin-bottom: 20px; transition: 0.3s;
        }
        .order-card:hover { box-shadow: 0 8px 20px rgba(14,165,233,0.15); border-color: #0ea5e9; }

        .order-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px dashed #e5e7eb; padding-bottom: 12px; margin-bottom: 15px;
        }
        .order-no { font-size: 1.2em; font-weight: 700; color: #075985; }
        .order-date { font-size: 0.85em; color: #6b7280; }
        .order-status { padding: 6px 16px; border-radius: 20px; font-size: 0.8em; font-weight: 700; }
        .status-PLACED { background: #dbeafe; color: #075985; }
        .status-COMPLETED { background: #dcfce7; color: #166534; }
        .status-DELIVERED { background: #e0f2fe; color: #0c4a6e; }
        .status-ACCEPTED { background: #cffafe; color: #0e7490; }

        .order-footer { margin-top: 18px; display: flex; justify-content: space-between; align-items: center; gap: 10px; }
        .delete-btn { background: #dc2626; }
        .delete-btn:hover { background: #b91c1c; }
        .invoice-btn { background: #0ea5e9; }
        .no-orders { text-align: center; padding: 60px; color: #9ca3af; }

        .modal {
            display: none;                /* ‚úÖ hidden by default */
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal:not(.hidden) {
            display: flex;                /* ‚úÖ show only when opened */
        }

        .modal-box {
            background: white; padding: 25px; border-radius: 12px;
            max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3); animation: modalSlide 0.3s ease;
        }
        @keyframes modalSlide {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal-box h3 { color: #075985; margin-bottom: 20px; font-size: 1.4em; }
        .modal-buttons { display: flex; gap: 10px; margin-top: 20px; }
        .modal-buttons button { flex: 1; }

        @media (max-width: 768px) {
            nav { padding: 15px 20px; }
            .nav-links { display: none; }
            .logo-text { font-size: 1.2em; }
            .logo-circle { width: 50px; height: 50px; font-size: 1.4em; }
            .hero-title, .hero-subtitle { font-size: 3.5em; }
            .social-links { left: 20px; }
            .nav-arrow { width: 50px; height: 50px; }
            .nav-arrow.left { left: 20px; }
            .nav-arrow.right { right: 20px; }
            .container { flex-direction: column; }
            .cart { border-left: none; border-top: 1px solid #ddd; }
        }
        /* ================= CART DRAWER ================= */

.cart-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 40, 60, 0.55);
    z-index: 1400;
}

.cart-drawer {
    position: fixed;
    top: 0;
    right: 0;
    width: 380px;
    height: 100vh;
    background: #f8fcff;
    z-index: 1500;
    display: flex;
    flex-direction: column;
    box-shadow: -10px 0 30px rgba(0,0,0,0.25);
    transform: translateX(100%);
    transition: transform 0.35s ease;
}

.cart-drawer.open {
    transform: translateX(0);
}

.hidden {
    display: none;
}

/* Header */
.cart-header {
    padding: 18px 20px;
    background: linear-gradient(135deg, #075985, #0ea5e9);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.close-cart {
    cursor: pointer;
    font-size: 1.3em;
}

/* Body */
.cart-body {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
}

.drawer-item {
    background: white;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.drawer-item-title {
    font-weight: 700;
    color: #075985;
}

.drawer-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 8px;
}

.qty-control button {
    background: #e0f2fe;
    border: none;
    padding: 4px 10px;
    font-weight: bold;
    border-radius: 6px;
    cursor: pointer;
}

.qty-control span {
    margin: 0 8px;
    font-weight: 700;
}

.item-price {
    font-weight: 700;
    color: #0ea5e9;
}

/* Footer */
.cart-footer {
    padding: 15px;
    border-top: 1px solid #ddd;
    background: #ffffff;
}

.bill-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
    font-size: 0.95em;
}

.bill-row.highlight {
    color: #0e7490;
    font-weight: 600;
}

.bill-total {
    display: flex;
    justify-content: space-between;
    font-size: 1.2em;
    font-weight: 800;
    margin: 10px 0;
    color: #075985;
}

.checkout-btn {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(135deg, #0ea5e9, #06b6d4);
    color: white;
    font-size: 1em;
    font-weight: 700;
    cursor: pointer;
}

.product-qty {
    display: flex;
    align-items: center;
    justify-content: space-between;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    background: #ffffff;
}

.product-qty button {
    background: none;
    border: none;
    padding: 10px 14px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    color: #e11d48;
}

.product-qty span {
    min-width: 32px;
    text-align: center;
    font-weight: 700;
    color: #0f172a;
}

/* ================= ADD ‚Üí QTY ANIMATION ================= */

.product-action {
    position: relative;
}

/* Add button animation */
.add-btn.added {
    background: linear-gradient(135deg, #16a34a, #22c55e);
    animation: addedPulse 0.4s ease;
}

@keyframes addedPulse {
    0% { transform: scale(0.9); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Tick overlay */
.added-tick {
    position: absolute;
    inset: 0;
    background: rgba(22, 163, 74, 0.9);
    color: white;
    font-weight: 700;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: tickFade 0.6s ease forwards;
    pointer-events: none;
}

@keyframes tickFade {
    0% { opacity: 0; transform: scale(0.8); }
    40% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(1.2); }
}

/* Qty switch animation */
.product-qty {
    animation: slideIn 0.25s ease;
}

@keyframes slideIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

.remove-item {
    background: transparent;
     border: none;
    color: #e2dcdc;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer; 
    float: right;
}

.remove-item:hover {
    transform: scale(1.2);
    color: #ef4444;
    background-color: transparent;
} 

.add-btn {
    animation: fadeIn 0.25s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

/* ================= PRODUCT IMAGE CARD ================= */

.product-card {
    background: #ffffff;
    border-radius: 14px;
    border: 1px solid #e5e7eb;
    overflow: hidden;
    transition: all 0.25s ease;
}

.product-card:hover {
    box-shadow: 0 12px 28px rgba(14,165,233,0.18);
    transform: translateY(-4px);
}

/* Image area */
/* .product-image-wrapper {
    width: 100%;
    height: 190px;
    background: #f1f5f9;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
} */
/* .product-image-wrapper img {
    max-width: 100%;
    max-height: 100%;
    object-fit: cover;
}        */
/* Placeholder if image missing */
/* .image-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #e0f2fe, #f8fafc);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 16px;
    font-weight: 700;
    color: #075985;
    font-size: 1.05em;
} */

/* Content padding */
.product-info {
    padding: 14px 16px 18px;
    display: flex;
    flex-direction: column;
    flex: 1;
}


.product-name {
    font-size: 1.05em;
    font-weight: 700;
    color: #0f172a;
    margin-bottom: 6px;
    line-height: 1.3;
}

.product-category {
    display: inline-block;
    width: fit-content;
    background: #e0f2fe;
    color: #075985;
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 0.75em;
    font-weight: 600;
    margin-bottom: 10px;
}

.price-row {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    font-size: 0.9em;
}

.customer-price {
    font-weight: 800;
    color: #0891b2;
}

.product-image-wrapper.loading {
    background: linear-gradient(
        90deg,
        #f1f5f9 25%,
        #e2e8f0 37%,
        #f1f5f9 63%
    );
    background-size: 400% 100%;
    animation: shimmer 1.2s ease infinite;
}

@keyframes shimmer {
    0% { background-position: 100% 0; }
    100% { background-position: -100% 0; }
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* ‚úÖ always 3 per row */
    gap: 24px;
    margin-top: 20px;
}

@media (max-width: 1024px) {
    .products-grid {
        grid-template-columns: repeat(2, 1fr); /* tablets */
        padding-bottom: 40px;
    }
}

@media (max-width: 640px) {
    .products-grid {
        grid-template-columns: 1fr; /* mobile */
        padding-bottom: 40px;
    }
}

.product-image-wrapper {
    width: 100%;
    height: 165px;                 /* same height as Licious */
    background: #f8fafc;
    overflow: hidden;           /* light neutral background */
    /* display: flex;
    align-items: center;
    justify-content: center;
    padding: 0px;                 white space around image */
}

.product-image-wrapper img {
    max-width: 100%;
    max-height: 100%;
    object-fit: cover;           /* üî• THIS IS THE KEY */
    /* border-radius: 12px; */
}

.image-placeholder {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #e0f2fe, #f8fafc);
    /* border-radius: 12px; */
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    /* padding: 16px; */
    font-weight: 700;
    color: #075985;
    /* font-size: 0.95em;
    opacity: 0.8; */
}

.image-placeholder::before {
    content: "üñºÔ∏è";
    display: block;
    font-size: 1.6em;
    margin-bottom: 6px;
}

.notification-item {
    background: white;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}

.notification-item b {
    color: #075985;
    font-size: 0.95em;
}

.notification-item p {
    margin-top: 6px;
    font-size: 0.85em;
    color: #475569;
}


#orders {
    margin-top: 120px;
}

/* .orders-container {
    padding-left: 24px;
    padding-right: 24px;
} */

.orders-container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 24px;
}


.container {
    max-width: 1200px;     /* center content */
    margin: 0 auto;
    padding: 0 24px;      /* üëà LEFT & RIGHT SPACE */
}

.content {
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(12px);
    border-radius: 22px;
    box-shadow: 0 20px 45px rgba(7, 89, 133, 0.15);
}

#notificationDrawer .cart-header {
    background: linear-gradient(135deg, #0e7490, #38bdf8);
}

.hero-title {
    margin-bottom: 10px; /* reduce gap */
}

.hero-subtitle {
    margin-bottom: 22px; /* tighter spacing */
}

.hero-description {
    margin-top: 8px;
    line-height: 1.75;
}


.cta-button {
    padding: 18px 46px;
    background: linear-gradient(135deg, #22d3ee, #0ea5e9);
    box-shadow:
        0 12px 30px rgba(14,165,233,0.45),
        inset 0 1px 0 rgba(255,255,255,0.3);
}

.cta-button:hover {
    transform: translateY(-4px);
    box-shadow: 0 18px 45px rgba(14,165,233,0.6);
}

.nav-arrow {
    width: 52px;
    height: 52px;
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.35);
}

.nav-arrow.left { left: 36px; }
.nav-arrow.right { right: 36px; }

.hero::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
        circle at 30% 40%,
        rgba(255,255,255,0.08),
        transparent 60%
    );
    pointer-events: none;
}

.nav-icons {
    align-items: center;
    margin-top: 2px;
}

.product-image-wrapper {
    width: 100%;
    aspect-ratio: 3 / 2;      /* ‚úÖ matches 600√ó399 */
    background: #f8fafc;
    overflow: hidden;
}

.product-image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;        /* clean crop, no stretch */
    display: block;
}


/* ================= TRUCK CHECKOUT ANIMATION ================= */

.truck-button {
    position: relative;
    width: 100%;
    height: 52px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    overflow: hidden;
    background: linear-gradient(135deg, #075985, #0ea5e9, #06b6d4);
    color: white;
    font-weight: 800;
    font-size: 1em;
    box-shadow: 0 12px 28px rgba(14,165,233,0.45);
}

.truck-button span {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s ease;
}

.truck-button .success {
    opacity: 0;
}

.truck-button.active .default {
    opacity: 0;
}

.truck-button.active .success {
    opacity: 1;
}

/* Truck */
.truck {
    position: absolute;
    left: -120px;
    bottom: 6px;
    width: 110px;
    height: 40px;
    display: flex;
    align-items: center;
}

.truck .back {
    width: 60px;
    height: 26px;
    background: #e0f2fe;
    border-radius: 4px;
}

.truck .front {
    width: 28px;
    height: 22px;
    background: #bae6fd;
    margin-left: 4px;
    border-radius: 4px;
}

.truck .box {
    position: absolute;
    width: 14px;
    height: 14px;
    background: #38bdf8;
    top: -6px;
    left: 20px;
    border-radius: 2px;
}

.truck .wheel {
    width: 10px;
    height: 10px;
    background: #0f172a;
    border-radius: 50%;
    position: absolute;
    bottom: -4px;
    left: 12px;
}

/* Animation */
.truck-button.active .truck {
    animation: drive 2s ease forwards;
}

@keyframes drive {
    0% { transform: translateX(0); }
    100% { transform: translateX(520px); }
}


    </style>
</head>
<body>
    <nav id="navbar">
        <div class="logo" onclick="scrollToTop()">
            <div class="logo-circle">üêü</div>
            <span class="logo-text">Ocean Fresh</span>
        </div>
        <ul class="nav-links">
            <li><a data-section="home" class="active" onclick="scrollToTop(); return false;">Home</a></li>
            <li><a data-section="shop" onclick="scrollToShop(); return false;">Shop</a></li>
            <li><a data-section="orders" onclick="showSection('orders'); return false;">Orders</a></li>

        </ul>
            <div class="nav-icons">
               
                <span class="nav-icon" onclick="openProfileDrawer()">
    üë§
</span>


                <!-- üîî Notifications -->
                <span class="nav-icon" onclick="openNotificationDrawer()">
                    üîî
                    <span class="cart-badge" id="notificationCount" style="display:none;">0</span>
                </span>

                <!-- üõí Cart -->
                <span class="nav-icon" onclick="openCart()">
                    üõí <span class="cart-badge" id="cartCount">0</span>
                </span>
            </div>

    </nav>

    <!-- PROFILE OVERLAY -->
<div id="profileOverlay"
     class="cart-overlay hidden"
     onclick="closeProfileDrawer()">
</div>

<!-- PROFILE DRAWER -->
<div id="profileDrawer" class="cart-drawer hidden">

    <div class="cart-header">
        <h3>üë§ My Profile</h3>
        <span class="close-cart" onclick="closeProfileDrawer()">‚úï</span>
    </div>

    <div class="cart-body">

        <!-- Profile Info -->
        <div id="profileInfo"
             style="background:#ffffff;
                    padding:14px;
                    border-radius:10px;
                    margin-bottom:14px;">
            Loading profile...
        </div>

        <!-- Completed Orders -->
        <h4 style="margin:10px 0;color:#075985;">
            ‚úÖ Completed Orders
        </h4>

        <div id="profileOrders">
            Loading orders...
        </div>
    </div>

    <div class="cart-footer">
        <button class="checkout-btn"
                style="background:#dc2626"
                onclick="logoutClient()">
            Logout
        </button>
    </div>

</div>




    <section class="hero" id="heroSection">
        <div class="hero-content">
            <h1 class="hero-title">Delicious</h1>
            <h2 class="hero-subtitle">Seafood</h2>
            <p class="hero-description">
                Experience the finest selection of fresh seafood, sustainably sourced and delivered to your door. 
                  From succulent prawns to premium fish, discover ocean-fresh quality that transforms every meal into a celebration.
            </p>
            <button class="cta-button" onclick="showSection('shop')">Explore Products</button>
        </div>
        <div class="nav-arrow left">‚Üê</div>
        <div class="nav-arrow right">‚Üí</div>
        <div class="scroll-indicator" onclick="scrollToContent()"></div>
    </section>

    <div class="main-content" id="mainContent">
        <div class="container">
            <div class="content" id="shop">
                <h2 style="color:#075985;">üõí Shop Fresh Seafood</h2>
                <div id="products" class="products-grid"></div>
            </div>

            <div class="content hidden"  id="orders">
                <div class="orders-header">
                    <h2>üì¶ My Orders</h2>
                    <div>
                        <button onclick="loadOrders('active')">Active</button>
                        <button onclick="loadOrders('completed')">Completed</button>
                    </div>
                </div>
                <div class="orders-container">
                    <div id="orderList">
                        <!-- order cards -->
                    </div>
                </div>
            </div>

            <div class="cart" id="cartSection">
                <h3>üõí Cart</h3>
                <div id="cartItems">Cart is empty</div>
                <button id="placeOrderBtn" onclick="placeOrder()" style="width:100%; margin-top:15px;">Place Order</button>
            </div>
        </div>
    </div>

    <div id="editModal" class="modal hidden">
        <div class="modal-box">
            <h3>Edit Order</h3>
            <div id="editContent"></div>
            <div class="modal-buttons">
                <button onclick="saveOrderEdit()">Save Changes</button>
                <button onclick="closeEdit()" style="background:#64748b;">Cancel</button>
            </div>
        </div>
    </div>

    <div id="detailsModal" class="modal hidden">
        <div class="modal-box">
            <h3>Order Details</h3>
            <div id="detailsContent"></div>
            <button onclick="closeDetails()" style="width:100%;background:#64748b;">Close</button>
        </div>
    </div>

        <!-- CART OVERLAY -->
    <div id="cartOverlay" class="cart-overlay hidden" onclick="closeCart()"></div>

    <!-- CART DRAWER -->
    <div id="cartDrawer" class="cart-drawer hidden">
        <div class="cart-header">
            <h3>üõí Order Summary</h3>
            <span class="close-cart" onclick="closeCart()">‚úï</span>
        </div>

        <div class="cart-body" id="cartDrawerItems">
            <!-- Items injected via JS -->
        </div>

        <div class="cart-footer">
            <div class="bill-row">
                <span>Subtotal</span>
                <span id="cartSubtotal">‚Çπ0</span>
            </div>
            <div class="bill-row highlight">
                <span>Delivery</span>
                <span>FREE</span>
            </div>

            <div class="bill-total">
                <span>Total</span>
                <span id="cartTotal">‚Çπ0</span>
            </div>

            <button class="truck-button" onclick="animateCheckout(this)">
                <span class="default">Proceed to Checkout</span>
                <span class="success">Order Placed</span>

                <div class="truck">
                    <div class="wheel"></div>
                    <div class="back"></div>
                    <div class="front"></div>
                    <div class="box"></div>
                </div>
            </button>

        </div>

    </div>

    <!-- NOTIFICATION OVERLAY -->
<div id="notificationOverlay"
     class="cart-overlay hidden"
     onclick="closeNotificationDrawer()">
</div>

<!-- NOTIFICATION DRAWER -->
<div id="notificationDrawer" class="cart-drawer hidden">

    <div class="cart-header">
        <h3>üîî Notifications</h3>
        <span class="close-cart" onclick="closeNotificationDrawer()">‚úï</span>
    </div>

    <div class="cart-body" id="notificationDrawerItems">
        <!-- Notifications injected via JS -->
    </div>

    <div class="cart-footer">
        <button class="checkout-btn"
                onclick="openNotifications()">
            View All Notifications
        </button>
    </div>

</div>



    <script>

        document.addEventListener("DOMContentLoaded", () => {
            loadCart();
            loadShop();
            renderCart();
            renderCartDrawer();
            loadNotificationCount();
            document.getElementById("heroSection").style.display = 'flex';
            document.getElementById("shop").classList.remove("hidden");
            document.getElementById("orders").classList.add("hidden");
            document.getElementById("cartSection").style.display = "none";


        });


        const customerId = "{{ customer_id }}";
        let cart = [], editingOrderId = null, editingItems = [];

        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            navbar.classList.toggle('scrolled', window.scrollY > 50);
        });
// Scroll to top function
function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });

    document.getElementById('heroSection').style.display = 'flex';
    document.getElementById('shop').classList.remove('hidden');
    document.getElementById('orders').classList.add('hidden');
    // document.getElementById('cartSection').style.display = 'block';

    updateActiveNav('home');
}

function scrollToShop() {
    document.getElementById('heroSection').style.display = 'flex';
    document.getElementById('shop').classList.remove('hidden');
    document.getElementById('orders').classList.add('hidden');
    // document.getElementById('cartSection').style.display = 'block';

    document.getElementById('shop').scrollIntoView({ behavior: 'smooth' });
    updateActiveNav('shop');
}



        function scrollToContent() {
            document.getElementById('mainContent').scrollIntoView({ behavior: 'smooth' });
        }
// Update active navigation link
          function updateActiveNav(section) {
            document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
            document.querySelector(`nav a[data-section="${section}"]`)?.classList.add('active');
        }

// Show specific section

        function showSection(id) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
            closeCart();
            if (id === 'orders') {
                document.getElementById('heroSection').style.display = 'none';
                document.getElementById('orders').classList.remove('hidden');
                document.getElementById('shop').classList.add('hidden');
                // document.getElementById('cartSection').style.display = 'none';
                updateActiveNav('orders');
                loadOrders('active');
            }
            else if (id === 'shop') {
                document.getElementById('heroSection').style.display = 'flex';
                document.getElementById('shop').classList.remove('hidden');
                document.getElementById('orders').classList.add('hidden');
                updateActiveNav('shop');

                // smooth scroll to products
                document.getElementById('shop')
                    .scrollIntoView({ behavior: 'smooth' });
            }


        }




        function loadShop() {
            fetch(`/api/shop/${customerId}`)
                .then(r => r.json())
                .then(data => {
                    const div = document.getElementById("products");
                    window.productMap = {};
                    data.forEach(p => { window.productMap[p.id] = p; });
                    div.innerHTML = data.map(p => `
                        <div class="product-card">
                            <div class="product-image-wrapper">
                                ${
                                    p.image
                                    ? `<img src="${p.image}" onerror="this.src='/static/images/${p.name}.jpg'"  alt="${p.name}" />`
                                    : `<div class="image-placeholder">${p.name}</div>`
                                }
                            </div>

                            <div class="product-info">
                                <div class="product-name">${p.name}</div>
                                <div class="product-category">${p.category || "Seafood"}</div>

                                <div class="price-row">
                                    <span>Price</span>
                                    <span class="customer-price">‚Çπ${p.price}</span>
                                </div>

                                <div class="product-action" id="action-${p.id}">
                                    <button class="add-btn" onclick='addToCart(${JSON.stringify(p)})'>
                                        Add +
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                });
            setTimeout(() => {
                cart.forEach(item => updateProductAction(item.id));
                renderCart();
                renderCartDrawer();
            }, 0);

        }

        function addToCart(p) {
            let item = cart.find(i => i.id === p.id);

            if (item) {
                item.quantity++;
                item.subtotal = item.quantity * item.price;
            } else {
                cart.push({
                    id: p.id,
                    name: p.name,
                    price: p.price,
                    quantity: 1,
                    subtotal: p.price
                });
            }

            showAddedTick(p.id);
            updateProductAction(p.id);

            renderCart();
            renderCartDrawer();
            openCart();
            saveCart();
        }

        function increaseProductQty(productId) {
            const item = cart.find(i => i.id === productId);
            if (!item) return;

            item.quantity++;
            item.subtotal = item.quantity * item.price;

            updateProductAction(productId);
            renderCart();
            renderCartDrawer();
            saveCart()
        }

        function decreaseProductQty(productId) {
            const item = cart.find(i => i.id === productId);
            if (!item) return;

            item.quantity--;

            if (item.quantity <= 0) {
                cart = cart.filter(i => i.id !== productId);
                resetProductAction(productId);
            } else {
                item.subtotal = item.quantity * item.price;
                updateProductAction(productId);
            }

            renderCart();
            renderCartDrawer();
            saveCart()
        }

        function updateProductAction(productId) {
            const item = cart.find(i => i.id === productId);
            if (!item) return;

            const div = document.getElementById(`action-${productId}`);
            if (!div) return;

            div.innerHTML = `
                <div class="product-qty">
                    <button onclick="decreaseProductQty('${productId}')">‚àí</button>
                    <span>${item.quantity}</span>
                    <button onclick="increaseProductQty('${productId}')">+</button>
                </div>
            `;
        }

        function resetProductAction(productId) {
            const p = window.productMap[productId];
            const div = document.getElementById(`action-${productId}`);

            if (!div || !p) return;

            div.innerHTML = `
                <button class="add-btn" onclick='addToCart(${JSON.stringify(p)})'>
                    Add +
                </button>
            `;
        }

        function resetAllProductActions() {
            Object.keys(window.productMap || {}).forEach(productId => {
                resetProductAction(productId);
            });
        }


        function removeFromCart(id) {
            cart = cart.filter(i => i.id !== id);

            resetProductAction(id);
            renderCart();
            renderCartDrawer();
            saveCart();
            // if (cart.length === 0) {
            //     closeCart();
            // }

        }


        function renderCart() {
            const div = document.getElementById("cartItems");
            const btn = document.getElementById("placeOrderBtn");
            const badge = document.getElementById("cartCount");
            
            badge.textContent = cart.length;

            if (cart.length === 0) {
                div.innerHTML = "Cart is empty";
                btn.disabled = true;
                btn.style.opacity = "0.6";
                return;
            }

            let total = 0;
            btn.disabled = false;
            btn.style.opacity = "1";

            div.innerHTML = cart.map(item => {
                total += item.subtotal;
                return `
                    <div class="cart-item">
                        <div>
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-meta">
                                ‚Çπ${item.price} √ó 
                                <button class="qty-btn" onclick="decreaseQty('${item.id}')">‚ûñ</button>
                                <input type="number" min="1" class="qty-input" value="${item.quantity}" onchange="setQty('${item.id}', this.value)">
                                <button class="qty-btn" onclick="increaseQty('${item.id}')">‚ûï</button>
                            </div>
                        </div>
                        <div style="text-align:right;">
                            <div class="cart-item-price">‚Çπ${item.subtotal}</div>
                            <button class="remove-btn" onclick="removeFromCart('${item.id}')">Remove</button>
                        </div>
                    </div>
                `;
            }).join('') + `<div class="cart-total">Total: ‚Çπ${total}</div>`;
        }

        function increaseQty(id) {
            const item = cart.find(i => i.id === id);
            if (item) { item.quantity++; item.subtotal = item.quantity * item.price; updateProductAction(id); renderCart(); renderCartDrawer(); saveCart(); }
        }

        function decreaseQty(id) {
            const item = cart.find(i => i.id === id);
            if (item) {
                item.quantity--;
                if (item.quantity <= 0) {cart = cart.filter(i => i.id !== id); resetProductAction(id); }
                else { item.subtotal = item.quantity * item.price; updateProductAction(id); }
                renderCart();
                renderCartDrawer();
                saveCart();
            }
        }
// removeFromCart(id);
        // Set quantity directly
        function setQty(id, value) {
            const item = cart.find(i => i.id === id);
            if (!item) return;

            value = parseInt(value);
            if (isNaN(value) || value < 1) {
                removeFromCart(id);
            } else {
                item.quantity = value;
                item.subtotal = item.quantity * item.price;
                renderCart();
            }
        }


        // Place order function
        function placeOrder() {
            if (cart.length === 0) {
                alert("Your cart is empty");
                return;
            }

            fetch("/api/order/place", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ customer_id: customerId, items: cart })
            })
            .then(res => {
                if (!res.ok) throw new Error("Order failed");
                return res.json();
            })
            .then(() => {
                cart = [];
                saveCart();  
                resetAllProductActions();
                renderCart();
                renderCartDrawer();
                alert("Order placed successfully! üéâ");
            })
            .catch(() => alert("Failed to place order. Please try again."));
        }

        function loadOrders(type) {
            fetch(`/api/orders/${customerId}/${type}`)
                .then(res => res.json())
                .then(data => {
                    const div = document.getElementById("orderList");
                    if (!data.length) {
                        div.innerHTML = `<div class="no-orders">No orders found</div>`;
                        return;
                    }
                    div.innerHTML = data.map(o => {
                        let actions = "";
                        if (o.status === "PLACED") actions = `<button class="delete-btn" onclick="deleteOrder('${o.id}')">Cancel</button><button onclick="editOrder('${o.id}')">Edit</button>`;
                        if (o.status === "DELIVERED" && o.invoice_sent) actions += `<a class="btn invoice-btn" href="/invoice/${o.id}" target="_blank">Invoice</a>`;
                        if (o.status === "ACCEPTED") actions += `<p style="color:#0891b2;font-weight:600;">Arrival: ${o.arrival_date}</p>`;
                        if (o.status === "COMPLETED") actions = `<button onclick="viewOrderDetails('${o.id}')">View Details</button>`;
                        
                        return `
                            <div class="order-card">
                                <div class="order-header">
                                    <div>
                                        <div class="order-no">Order #${o.order_no}</div>
                                        <div class="order-date">${new Date(o.created_at).toLocaleString()}</div>
                                    </div>
                                    <span class="order-status status-${o.status}">${o.status}</span>
                                </div>
                                <div class="order-footer">${actions}</div>
                            </div>
                        `;
                    }).join('');
                });
        }

        function deleteOrder(orderId) {
            if (!confirm("Cancel this order?")) return;
            fetch(`/api/order/delete/${orderId}`, { method: "DELETE" }).then(() => loadOrders("active"));
        }

        function editOrder(orderId) {
            fetch(`/api/orders/${customerId}/active`)
                .then(res => res.json())
                .then(orders => {
                    const order = orders.find(o => o.id === orderId);
                    if (!order) return;
                    editingOrderId = orderId;
                    editingItems = JSON.parse(JSON.stringify(order.items));
                    renderEditItems();
                    document.getElementById("editModal").classList.remove("hidden");
                });
        }

        function renderEditItems() {
            const div = document.getElementById("editContent");
            if (editingItems.length === 0) {
                div.innerHTML = "<p style='text-align:center;color:#dc2626;font-weight:600;'>No products left. Saving will delete the order.</p>";
                return;
            }
            div.innerHTML = editingItems.map((item, index) => `
                <div style="background:#f8fafc;padding:12px;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center;">
                    ${item.name}
                    <input type="number" min="1" value="${item.quantity}" 
                           style="width:60px;padding:5px;border-radius:6px;border:1px solid #d1d5db;text-align:center;font-weight:600;"
                           onchange="updateQty(${index}, this.value)">
                    <button onclick="removeItem(${index})" style="background:#dc2626;font-size:0.8em;padding:5px 10px;margin-left:8px;">Remove</button>
                </div>
            `).join('');
        }


        // Set quantity directly  
        function updateQty(index, value) {
            value = parseInt(value);
            if (isNaN(value) || value < 1) {
                editingItems.splice(index, 1);
            } else {
                editingItems[index].quantity = value;
            }
            renderEditItems();
        }

        function removeItem(index) { editingItems.splice(index, 1); renderEditItems(); }

        function saveOrderEdit() {
            fetch(`/api/order/update/${editingOrderId}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ items: editingItems })
            }).then(() => { closeEdit(); loadOrders("active"); });
        }

        function closeEdit() {
            editingOrderId = null; editingItems = [];
            document.getElementById("editModal").classList.add("hidden");
        }

        function viewOrderDetails(orderId) {
            fetch(`/api/orders/${customerId}/completed`)
                .then(res => res.json())
                .then(orders => {
                    const order = orders.find(o => o.id === orderId);
                    if (!order) return;
                    let totalQty = order.items.reduce((sum, i) => sum + i.quantity, 0);
                    let html = `
                        <div style="text-align:center;">
                            <span class="order-status status-${order.status}" style="display:inline-block;margin-bottom:15px;">
                                ${order.status}
                            </span>
                        </div>
                        <div style="background:#f8fafc;padding:14px;border-radius:10px;margin-bottom:10px;">
                            <div style="display:flex;justify-content:space-between;padding:6px 0;font-size:0.95em;">
                                <span style="color:#475569;font-weight:600;">Order No</span>
                                <span style="font-weight:700;color:#0f172a;">${order.order_no}</span>
                            </div>
                            <div style="display:flex;justify-content:space-between;padding:6px 0;font-size:0.95em;">
                                <span style="color:#475569;font-weight:600;">No. of items</span>
                                <span style="font-weight:700;color:#0f172a;">${totalQty}</span>
                            </div>
                            <div style="display:flex;justify-content:space-between;padding:6px 0;font-size:0.95em;">
                                <span style="color:#475569;font-weight:600;">Ordered On</span>
                                <span style="font-weight:700;color:#0f172a;">${new Date(order.created_at).toLocaleString()}</span>
                            </div>
                        </div>
                    `;
                    if (order.status === "ACCEPTED") {
                        html += `<div style="background:#e0f2fe;padding:10px;border-radius:8px;text-align:center;font-weight:700;color:#075985;margin-top:10px;">üöö Expected Arrival: ${order.arrival_date}</div>`;
                    }
                    if (order.status === "COMPLETED") {
                        html += `<div style="background:#f8fafc;padding:14px;border-radius:10px;"><div style="display:flex;justify-content:space-between;padding:6px 0;font-size:0.95em;"><span style="color:#475569;font-weight:600;">Order Status</span><span style="font-weight:700;color:#0f172a;">Delivered Successfully</span></div></div>`;
                    }
                    document.getElementById("detailsContent").innerHTML = html;
                    document.getElementById("detailsModal").classList.remove("hidden");
                });
        }

        function closeDetails() {
            document.getElementById("detailsModal").classList.add("hidden");
        }

      //   document.addEventListener("DOMContentLoaded", () => {
      //     loadShop();
      //     renderCart();
      // });

      function openCart() {
    document.getElementById("cartDrawer").classList.add("open");
    document.getElementById("cartDrawer").classList.remove("hidden");
    document.getElementById("cartOverlay").classList.remove("hidden");
    renderCartDrawer();
}

function closeCart() {
    document.getElementById("cartDrawer").classList.remove("open");
    document.getElementById("cartDrawer").classList.add("hidden");
    document.getElementById("cartOverlay").classList.add("hidden");
}


// function renderCartDrawer() {
//     const div = document.getElementById("cartDrawerItems");
//     const subtotalEl = document.getElementById("cartSubtotal");
//     const totalEl = document.getElementById("cartTotal");

//     if (cart.length === 0) {
//         div.innerHTML = "<p style='text-align:center;color:#64748b;'>Your cart is empty</p>";
//         subtotalEl.textContent = "‚Çπ0";
//         totalEl.textContent = "‚Çπ0";
//         return;
//     }

//     let total = 0;

//     div.innerHTML = cart.map(item => {
//         total += item.subtotal;
//         return `
//             <div class="drawer-item">
//                 <div class="drawer-item-title">${item.name}</div>
//                 <div class="drawer-controls">
//                     <div class="qty-control">
//                         <button onclick="decreaseQty('${item.id}')">‚àí</button>
//                         <span>${item.quantity}</span>
//                         <button onclick="increaseQty('${item.id}')">+</button>
//                     </div>
//                     <div class="item-price">‚Çπ${item.subtotal}</div>
//                 </div>
//             </div>
//         `;
//     }).join("");

//     subtotalEl.textContent = `‚Çπ${total}`;
//     totalEl.textContent = `‚Çπ${total}`;
// }

function renderCartDrawer() {
    const container = document.getElementById("cartDrawerItems");
    const subtotalEl = document.getElementById("cartSubtotal");
    const totalEl = document.getElementById("cartTotal");

    if (cart.length === 0) {
        container.innerHTML = `<p style="text-align:center;color:#64748b;">Cart is empty</p>`;
        subtotalEl.textContent = "‚Çπ0";
        totalEl.textContent = "‚Çπ0";
        return;
    }

    let subtotal = 0;

    container.innerHTML = cart.map(item => {
        subtotal += item.subtotal;

        return `
            <div class="drawer-item">
                <div class="drawer-item-title">
                    ${item.name}
                    <button class="remove-item" onclick="removeFromCart('${item.id}')">‚úï</button>
                </div>

                <div class="drawer-controls">
                    <div class="qty-control">
                        <button onclick="decreaseQty('${item.id}')">‚àí</button>
                        <span>${item.quantity}</span>
                        <button onclick="increaseQty('${item.id}')">+</button>
                    </div>

                    <div class="item-price">‚Çπ${item.subtotal}</div>
                </div>
            </div>
        `;
    }).join("");

    subtotalEl.textContent = `‚Çπ${subtotal}`;
    totalEl.textContent = `‚Çπ${subtotal}`;
}


function checkoutFromDrawer() {
    if (cart.length === 0) {
        alert("Your cart is empty");
        return;
    }

    // Close drawer (optional but recommended)
    closeCart();

    // Reuse existing order placement logic
    placeOrder();
}

function openNotificationDrawer() {
    document.getElementById("notificationDrawer").classList.add("open");
    document.getElementById("notificationDrawer").classList.remove("hidden");
    document.getElementById("notificationOverlay").classList.remove("hidden");
    loadNotificationPreview();
}

function closeNotificationDrawer() {
    document.getElementById("notificationDrawer").classList.remove("open");
    document.getElementById("notificationDrawer").classList.add("hidden");
    document.getElementById("notificationOverlay").classList.add("hidden");
}


function saveCart() {
    localStorage.setItem("oceanFreshCart", JSON.stringify(cart));
}

function loadCart() {
    const saved = localStorage.getItem("oceanFreshCart");
    if (saved) {
        cart = JSON.parse(saved);
    }
}

function showAddedTick(productId) {
    const container = document.getElementById(`action-${productId}`);
    if (!container) return;

    const tick = document.createElement("div");
    tick.className = "added-tick";
    tick.innerHTML = "‚úì Added";

    container.appendChild(tick);

    setTimeout(() => tick.remove(), 600);
}

function loadNotificationCount() {
    fetch(`/client/api/notifications/${customerId}`)
        .then(r => r.json())
        .then(data => {
            const badge = document.getElementById("notificationCount");

            if (data.length > 0) {
                badge.textContent = data.length;
                badge.style.display = "flex";
            } else {
                badge.style.display = "none";
            }
        });
}

function loadNotificationPreview() {
    fetch(`/client/api/notifications/${customerId}`)
        .then(r => r.json())
        .then(data => {
            const div = document.getElementById("notificationDrawerItems");

            if (!data.length) {
                div.innerHTML = `<p style="text-align:center;color:#64748b;">
                    No notifications
                </p>`;
                return;
            }

            div.innerHTML = data.slice(0, 5).map(n => `
                <div class="notification-item">
                    <b>Order #${n.order_no}</b>
                    <p>Status: ${n.state}</p>
                </div>
            `).join("");
        });
}



function openNotifications() {
    window.location.href = `/client/notifications/${customerId}`;
}


function animateCheckout(btn) {
    if (cart.length === 0) {
        alert("Your cart is empty");
        return;
    }

    // Start animation
    btn.classList.add("active");
    btn.disabled = true;

    // Wait for animation ‚Üí then place order
    setTimeout(() => {
        checkoutFromDrawer();

        // Reset button after success
        setTimeout(() => {
            btn.classList.remove("active");
            btn.disabled = false;
        }, 1200);
    }, 2000);
}


function openProfileDrawer() {
    document.getElementById("profileDrawer").classList.add("open");
    document.getElementById("profileDrawer").classList.remove("hidden");
    document.getElementById("profileOverlay").classList.remove("hidden");

    loadProfileInfo();
    loadProfileCompletedOrders();
}

function closeProfileDrawer() {
    document.getElementById("profileDrawer").classList.remove("open");
    document.getElementById("profileDrawer").classList.add("hidden");
    document.getElementById("profileOverlay").classList.add("hidden");
}
function loadProfileInfo() {
    fetch(`/client/api/profile/${customerId}`)
        .then(r => r.json())
        .then(p => {
            document.getElementById("profileInfo").innerHTML = `
                <div style="font-weight:700;color:#0f172a;font-size:1.05em;">
                    ${p.name}
                </div>
                <div style="font-size:0.9em;color:#64748b;">
                    ${p.email}
                </div>
            `;
        })
        .catch(() => {
            document.getElementById("profileInfo").innerHTML =
                "<p style='color:#dc2626;'>Failed to load profile</p>";
        });
}
function loadProfileCompletedOrders() {
    fetch(`/client/api/profile/orders/completed/${customerId}`)
        .then(r => r.json())
        .then(data => {
            const div = document.getElementById("profileOrders");

            if (!data.length) {
                div.innerHTML =
                    "<p style='color:#64748b;'>No completed orders</p>";
                return;
            }

            div.innerHTML = data.map(o => `
                <div style="
                    background:#f8fafc;
                    padding:10px;
                    border-radius:8px;
                    margin-bottom:8px;
                    font-size:0.9em;">
                    <b>Order #${o.order_no}</b><br>
                    Items: ${o.total_items}<br>
                    <span style="color:#64748b;">
                        ${new Date(o.completed_at).toLocaleString()}
                    </span>
                </div>
            `).join("");
        })
        .catch(() => {
            document.getElementById("profileOrders").innerHTML =
                "<p style='color:#dc2626;'>Failed to load orders</p>";
        });
}
function logoutClient() {
    if (!confirm("Are you sure you want to logout?")) return;

    // Clear client-side data
    localStorage.removeItem("oceanFreshCart");

    // Redirect to login
    window.location.href = "/login";
}



    </script>
</body>
</html>